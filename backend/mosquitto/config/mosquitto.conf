# Mosquitto MQTT Broker Configuration
# For S4 Robot Backend

# =================================================================
# Network Configuration
# =================================================================

# Bind to all interfaces (allows Docker and local connections)
listener 1883 0.0.0.0

# WebSocket support
listener 9001
protocol websockets

# =================================================================
# Security Configuration
# =================================================================

# Allow anonymous connections (disable in production)
allow_anonymous true

# =================================================================
# Persistence Configuration
# =================================================================

# Disable persistence for development
persistence false

# =================================================================
# Logging Configuration
# =================================================================

# Log to stdout (visible in Docker logs)
log_dest stdout

# Log all message types for debugging
log_type error
log_type warning
log_type notice
log_type information

# Include connection messages in logs
connection_messages true

# Add timestamps to log messages
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# =================================================================
# Performance Configuration
# =================================================================

# Maximum number of concurrent connections
# -1 = unlimited (typically ~1024 due to OS limits)
max_connections -1

# Disable Nagle's algorithm for lower latency
set_tcp_nodelay true

# System topic update interval (seconds)
# 0 = disabled
sys_interval 10
